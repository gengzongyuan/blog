title: 数据库调优
date: 2018-09-27 15:36:57
tags: []
categories: []
---
1.索引存在建立的频率，在执行回帖操作时，响应时间较长，分析发现是进行全文搜索索引建立造成的，此时会进行全表扫描，所以效率比较低，如果想要提高效率，可以把索引作为周期性工作，由另一个作业线程来完成，比如15分钟。

2. DB的瓶颈可以采用分区、分库、分表的方式来缓解：旨在减少遍历范围，提高响应速度。（数据存放时经过hash算法存到指定片区，这个片区可能是某一台机器上的某一个库的某一个表分区）

3. 采用读写分离的方式来减轻单台服务器的IO负担


分布式数据库项目：MariaDB和阳振坤领导的OceanBase

redis数据库：基于内存，也可以基于磁盘持久化nosql数据库，使用c语言开发。比较常用的为使用redis来存储Session信息，不少公司在redis之上再加上一个中间层，来构建分布式缓存服务
Redis简介：https://www.cnblogs.com/fengru/p/5793087.html
Redis：https://baike.baidu.com/item/Redis/6549233?fr=aladdin

memCache缓存
https://baike.baidu.com/item/MemCache/8250931?fr=aladdin
> MemCache的工作流程如下：先检查客户端的请求数据是否在memcached中，如有，直接把请求数据返回，不再对数据库进行任何操作；如果请求的数据不在memcached中，就去查数据库，把从数据库中获取的数据返回给客户端，同时把数据缓存一份到memcached中（memcached客户端不负责，需要程序明确实现）；每次更新数据库的同时更新memcached中的数据，保证一致性；当分配给memcached内存空间用完之后，会使用LRU（Least Recently Used，最近最少使用）策略加上到期失效策略，失效数据首先被替换，然后再替换掉最近未使用的数据。<sup>[2]</sup> 
Memcache是一个高性能的[分布式](https://baike.baidu.com/item/%E5%88%86%E5%B8%83%E5%BC%8F)的内存对象缓存系统，通过在[内存](https://baike.baidu.com/item/%E5%86%85%E5%AD%98)里维护一个统一的巨大的[hash表](https://baike.baidu.com/item/hash%E8%A1%A8)，它能够用来存储各种[格式](https://baike.baidu.com/item/%E6%A0%BC%E5%BC%8F)的数据，包括[图像](https://baike.baidu.com/item/%E5%9B%BE%E5%83%8F)、[视频](https://baike.baidu.com/item/%E8%A7%86%E9%A2%91)、[文件](https://baike.baidu.com/item/%E6%96%87%E4%BB%B6)以及[数据库](https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93)检索的结果等。简单的说就是将数据调用到[内存](https://baike.baidu.com/item/%E5%86%85%E5%AD%98)中，然后从内存中读取，从而大大提高读取速度。
